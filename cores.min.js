var TYPO_SPACE="\\x00-\\x09\\x0b\\x0c\\x0e-\\x20\\xa0\\x7f\\u1680\\u180e\\u2000-\\u200f\\u2028-\\u202f\\u205f-\\u2064\\u3000\\ue004\\ue07b\\ue11a\\ue1d5\\ue4c6\\uf604\\uf04a\\uf8f5\\ufe0f\\ufeff",strCommon=(Object.assign(String.prototype,{toUNIX:function(){return this.replace(/\r/g,"")},space:function(){return this.toUNIX().replace(new RegExp("["+TYPO_SPACE+"]+","g")," ")},trims:function(){return this.space().replace(/^ +| +$/gm,"")},getReg:function(e){return new RegExp(this.replace(/\x5C\x5C+/g,"\\\\"),""===e?"":e||"gm")},regEscape:function(){return this.replace(/[#.*+?^=!:${}()|[\]\/\\-]/g,"\\$&")},getSafeReg:function(e){return this.regEscape().replace(/\b/g,"\\b").getReg(e)},replaces:function(e){var r,t=""+this;if(Array.isArray(e))t=t.replaceArrs(e);else for(r in e)t=t.replaceArrs(e[r]);return t},replaceArrs:function(e){return e.reduce(function(e,r){return"string"==typeof(r=[].concat(r))[0]&&(r[0]=r[0].getReg("g")),e.replace(r[0],r[1]||"")},this)},replaceAt:function(e){return this.replaceAtArr(e,"")},replaceAtRev:function(e){return this.replaceAtArr(e.reverse(),"")},replaceAtArr:function(r,e,t){var n=r[1].split(e);return this.replace(new RegExp("["+r[0]+"]","g"),function(e){return e=n[r[0].indexOf(e)]||e,"function"==typeof t?t(e):e})},cleanSpace:function(e,r){return r=r||/\s/g,e?this.replace(e,function(e){return e.replace(r,"")}):this.replace(r,"")},findCount:function(e){return(this.match(e)||"").length},len:function(){return this.length+this.findCount(/[^\x00-\xFF]/g)},fmt:function(r,t){var n,e=""+this,a=typeof r;return"string"==a||"number"==a?e.replace(/\{\$(?:zz|0)\}/g,r):"object"!=a?e:e.replace(/\{\$[\w\-\.]+\}/g,function(e){return n=r,e.slice(2,-1).split(".").every(function(e){return(n=n[e])||!1}),void 0===n?e:Array.isArray(n)?n.join(t||""):n})},ezfmt:function(r){return this.replace(/\{\$\w+\}/g,function(e){return r[e.slice(2,-1)]||e})},fmtReg:function(e,r,t){return this.fmt(e,t).getReg(r)},someTest:function(e){return e.some(function(e){return-1<this.search(e)},this)},mapLine:function(t){var n;return this.split("\n").map(function(e,r){return null===(n=t(e,r))||!1===n?e:n}).join("\n")+"\n"}}),{space:"\\x00-\\x09\\x0b\\x0c\\x0e-\\x20\\xa0\\x7f\\u1680\\u180e\\u2000-\\u200f\\u2028-\\u202f\\u205f-\\u2064\\u3000\\ue004\\ue07b\\ue11a\\ue1d5\\ue4c6\\uf604\\uf04a\\uf8f5\\ufe0f\\ufeff",han:"⺀-⻿⼀-⿟぀-ゟ゠-ヺー-ヿ㄀-ㄯ㇀-㇣㈀-㋿㐀-䶿一-鿿豈-﫿",latin:"À-ÿĀ-ʯᴀ-ᴥᵢ-ᶚḀ-ỿⁱⁿₐ-ₜↄⱠ-ⱿꜢ-ꟊꟐ-ꟙꟵ-ꟿꬰ-ꭚꭠ-ꭨﬀ-ﬆ",hwPun:"!-&(-/:-@[-`{-~¡-¿",qhwPun:"'",fwPun:"·–—―…※、。〈〉《》【】〔〕〖〗〝〞・！-／：-＠～￠-￥",qfwPun:"‘’“”「」『』",ofwPun:"°％‰‱℃℉%",enSep:"'`＇‘’『』",tone:"āáǎàēéěèōóǒòīíǐìūúǔùǖǘǚǜüḿǹńň"}),strChapter=(String.prototype.comFmt=function(){return this.replace(/\{\$\w+\}/g,function(e){return strCommon[e.slice(2,-1)]||e})},String.prototype.comReg=function(e){return new RegExp(this.comFmt(),""===e?"":e||"g")},strCommon.spaceWord="[{$han}{$fwPun}{$qfwPun}{$ofwPun}&\\x2f\\x5c]".comFmt(),{space:strCommon.space,sep:"： 　，、．·。—.,:|-",en:"{0,40}",c:["卷部","集篇册辑季冊輯","章折回话节幕節話"],ca:["部分|[单單]元","章[节節]|段落|[段场阙場闕]"],cf:"折卷册冊段节節",crt:"章",n:["0-9","０-９","零一二三四五六七八九十"],nc:"上中下续终續終",ss:"[（\\(]?[0-9０-９一二三四五六七八九十上中下续终續終]{0,3}[）\\)]?",sw:"[0-9]{1,2}|[零一二三四五六七八九十]{1,3}",nh:"[0-9]{1,5}(?:[-—.][0-9]{1,5})?",n1:"[0-9０-９]{1,5}",n2:"[0-9０-９]{1,5}(?:[-—.][0-9０-９]{1,5})?",n3:"[0０○〇零一二三四五六七八九十百千壹贰叁肆伍陆柒捌玖拾佰仟两廿卅卌貳叄陸兩]{1,7}",n4:"最[初终尾終]|[上下]半|[序初前始后终首末尾後終]之?|[上中下续断开續斷開]",w0:"[简簡自]介|自述|介[绍紹]|[预預]告|相[关關]",w1:"[作译譯编編著]者",w2:"(?:完[结結]|[完终終])",w3:"[☆★○●◎◇◆□■△▲※＃#]"}),regChapter={b:["〖【\\[","\\]】〗"],f:"[{$space}]*",s:"[{$sep}]{1,4}",sn:"[{$sep}]{0,4}",sz:"[{$sep}之]{1,4}",e:".{$en}[^。：;；\\n]",es:".{$en}[^，。：;；、…？！’”』」\\n]",t0:"正文|文案|[题題][注记註記跋]|[题題开開][卷篇头场頭場][诗词语詩詞語]|{$w1}(?:[案按]|寄[语語]|[前感]言|[后後的][话話])|[卷篇][首后後][语語]?|完[本结結]感言|[開开][場场]白|[脚标批附腳標][注註]|[注註][释解釋]|[导導][读讀语語]|[绪緒弁][言论論]|寄[语語]|[提总總梗]要|梗概|素材|目[录錄]|[大细总提細總][纲綱]|{$w0}|(?:小[说說]|作[品者]|主要人物|人物|内容|本书|[全本下][{$c.0}{$c.1}])(?:{$w0})",t1:["序篇章|首部曲|{$w1}序|[续續外][{$n}]?[{$c.2}]|(?:序章?|前[言记記]|尾[声聲]|[后後][记記]|楔子|引[子言文]|序[言论論文目曲传傳跋]|附[录錄]|[绪緒弁][言论論]|[后後][话話序语語]|附[记記语語]|尾[记記跋]|跋[尾文语語]|[首小节自次总代節總简原]序|大?[结結]局){$ss}","(?:同人[续續]?|[前后外续正後續间間转轉][传篇傳章]|完[结結]篇|特[别別]篇|[前后外里裏]番|[番篇]外[篇卷章语語]?){$ss}"],t2:"((?:第?{$n2}|第?{$n3}|{$n4})(?:{$ca.0}|{$ca.1}|[{$c}]))",t3:"([\\(（〔](?:{$n2}|{$n3}|[{$nc}])[\\)）〕])",t4:"([{$cf}])({$n1}|{$n3})",t5:"(?:\\b(?:chapter|section|chap|ch|part)|{$w3})[ \\.]*({$n1})",t6:"({$n2}|{$n3})",t20:"((?:{$n2}|{$n3}|{$n4})(?:{$ca.0}|{$ca.1}|[{$c}]))",t21:"((?:第{$n2}|第{$n3}|{$n4})(?:{$ca.0}|{$ca.1}|[{$c}]))",t80:"[\\[\\(（〖【〈［〔]({$n2}|{$n3})[\\]\\)）〗】〉］〕]",t81:"[\\[\\(（〖【〈［〔]((?:第?{$n2}|第?{$n3}|{$n4})[{$c}])[\\]\\)）〗】〉］〕]",t90:"(?:第?{$n2}|第?{$n3}|{$n4})",t91:"(?:第{$n2}|第{$n3}|{$n4})",ts:"[第\\(（][{$n.0}{$n.1}\\- 　]{3,12}[{$c}\\）)]"},getChapters={t0:{tpl:"^(?:{$t0}){$sn}$",level:3},t1:{tpl:"^({$t1})({$sn}|{$sz}{$e})$",join:"|"},t2:{tpl:"^{$t2}({$sn})({$e}|$)$"},t3:{tpl:"^{$t3}({$e}|$)$",level:4},t4:{tpl:"^{$t4}({$s}|{$s}{$e}|$)$",level:2},t5:{tpl:"^{$t5}{$sn}({$e}|$)$",type:"relaxe",level:3},t6:{tpl:"^{$t6}({$s}|{$s}{$e}|$)$",type:"relaxe",level:2}},config=(String.prototype.chapFlag=function(e,r){r=this.fmt(regChapter,r).fmt(strChapter);return""!=(e=""===e?"":e||"gm")&&e.indexOf("i")<0&&-1<r.indexOf("chapter")&&(e+="i"),{str:r,flag:e,t:e.replace("g","")}},String.prototype.chapReg=function(e,r){e=this.chapFlag(e,r);return e.str.getReg(e.flag)},{Separator:"＊＊＊　　＊＊＊　　＊＊＊",tSeparator:"＊".repeat(35),Divide:"：",Linenum:35,maxLinenum:200,endStrs:"未完待[续續]|未完|待[续續]|完[结結]|全[文书書][完终終]|[完终終]",novelTitle:/^[ 　]*(《([^》\n]+)》(.*[^。？！…\n]|$)|[书書]名[：\:](.+))$/m,novelAuthor:/^[ 　]*((?:作者|[续續改][写寫]|排[版编]|[精一二]校|作家|整理|改编|[编編译譯著]者|[编辑編輯][录錄]|著作?|翻[译譯]|勘[误誤校]|校[正证注订訂对對笺箋]|[笺箋][正证校注订訂])[：\:].*)$/gm,regListTitleCheck:"\\n(?=(?:{$sw}){$s}|[\\(（第])".chapReg("g"),regListTitle:["\\n(?:(?:{$sw}){$s}.*\\n(?:[^第\\n].*\\n){0,2}){2,10}".chapReg("g"),"\\n(?:[\\(（](?:{$sw})[\\)）].*\\n(?:.*\\n){0,2}){2,10}".chapReg("g"),/\n(?:第.+[。；…]\n){3,20}/g],regSkipTitle:{t0:[/[。;；—]$/,/^[\-—]{1,2}/,/^\d{1,6}(?:[\.,，。]\d{1,6})+/],t1:[/^(?:[上下]回|断章取义|同人不|序[长词战兴常稿歌秩次传述長詞戰興傳]|[开尾][部集阙季册闕冊章折回话节幕節話]|[前后上下中]段)/],t2:[/^(?:上节[目课]|下节课|[上下]篇作[业文]|[零○〇])/,/^[一二三四五六七八九十]{1,2}[爷奶爹娘爸妈舅叔姨婶嫂哥姐弟妹儿女孙侄子]/,/^(?:一(?:[直切生世味边旁幕]|回[复合首头到])|二话[没不沒]|三[生世八]|四[周边处海]|五[谷更体]|[百千][折转])/,/^第?[零一二三四五六七八九十百两]{1,3}(?:季度|卷[书经]|篇[篇经文]|[部集](?:戏|戲|电[影视視]|的|小说)|部好莱坞|回合|节课|段时间|场比赛)/,"^第?[{$n}][{$c}](?:《|……|[？！]{1,3}|[{$n}]|[，、]?第|[呢吗啊吧哈])".chapReg("")],t3:["^(?:{$n1}|{$n2})[年月日]".chapReg(""),/^[一二三十](?:[，、][一二三八九]){1,}/,/^(?:一二三|三二一)[，。！…]/,/^([一二三四五六七八九十百两兩])\1/,/^(?:壹[壹拾伍]|叁[叁伍捌]|伍[伍陆]|陆[陆]|拾[金取]|十[万分]|百[分千]|万[万千])/,/^[一二三四五六七八九十]{1,3}(?:[千万]两|[，、].*[…]$)/],t6:[/^\b\d{1,4}(?:[\.。\-\—\/、,，:：]\d{1,12}){1,}/,/^[\d０-９一二三四五六七八九十]{1,4}[年月][\d０-９一二三四五六七八九十]{1,3}[月日]/,/^\b[\d\.\-\—\至]{1,12}[%％‰℃°万亿wmbk]/i,/^[\d０-９一二三四五六七八九十百千万]{1,12}[元块次多]?[！？。…]{1,3}$/,/^[\d０-９]{1,4}(?:[、，][\d０-９]{1,4}){1,}/]},enSep:"\\b([a-zA-Z]+)\\b[{$enSep}]( |\\b[a-zA-Z]+\\b)".comReg(),rCoord:"\\b(?:\\d{1,3}(?:[.。]\\d{1,2})?[{$qfwPun}\\x22\\x27]){2}".comReg("g"),sNumber:["０１２３４５６７８９","0123456789"],sLetter:["ＡＢＣＤＥＦＧＨＩＪＫＬＭＮＯＰＱＲＳＴＵＶＷＸＹＺａｂｃｄｅｆｇｈｉｊｋｌｍｎｏｐｑｒｓｔｕｖｗｘｙｚ","ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"],sNumberLetter:["０１２３４５６７８９ＡＢＣＤＥＦＧＨＩＪＫＬＭＮＯＰＱＲＳＴＵＶＷＸＹＺａｂｃｄｅｆｇｈｉｊｋｌｍｎｏｐｑｒｓｔｕｖｗｘｙｚ","0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz"],sVariants:["ÀÁÂÃÄÅĀАǍⱭàáâãäåāǎɑаßЬЪьъÇçÐÈÉÊËĒĚèéêëēěΗんÌÍÎÏĪǏΙìíîïīǐιМΜḿмΝÑŃŇИñńňиηÒÓÔÕÖŌǑØОΟòóôõöōðǒøоÞΡþρΤτÙÚÛÜŪǓǕǗǙǛ∪υùúûüūǔǖǘǚǜⅤⅴνЩщωΥÝŸγýÿ","AAAAAAAAAaaaaaaaaaaaBbbbbCcDEEEEEEeeeeeeHhIIIIIIIiiiiiiiMMmmmNNNNNnnnnnOOOOOOOOOOooooooooooPPppTtUUUUUUUUUUuuuuuuuuuuuuVvvWwwYYYyyy"],sSerialNumber:["⓪⓿⒈①➀⓵➊❶⑴⒉②⓶➁➋❷⑵⒊③⓷➂➌❸⑶⒋④⓸➃➍❹⑷⒌⑤⓹➄➎❺⑸⒍⓺⑥➅➏❻⑹⒎⓻⑦➆➐❼⑺⒏⓼⑧➇➑❽⑻⒐⑨➈⓽➒❾⑼⒑⑩➉⓾➓❿⑽⒒⑪⑾⒓⑫⑿⒔⑬⒀⒕⑭⒁⒖⑮⒂⒗⑯⒃⒘⑰⒄⒙⑱⒅⒚⑲⒆⒛⑳⒇㊀㊁㊂㊃㊄㊅㊆㊇㊈㊉㈠㈡㈢㈣㈤㈥㈦㈧㈨㈩","00|00|01|01|01|01|01|01|01|02|02|02|02|02|02|02|03|03|03|03|03|03|03|04|04|04|04|04|04|04|05|05|05|05|05|05|05|06|06|06|06|06|06|06|07|07|07|07|07|07|07|08|08|08|08|08|08|08|09|09|09|09|09|09|09|10|10|10|10|10|10|10|11|11|11|12|12|12|13|13|13|14|14|14|15|15|15|16|16|16|17|17|17|18|18|18|19|19|19|20|20|20|一|二|三|四|五|六|七|八|九|十|一|二|三|四|五|六|七|八|九|十"],aQuotes:["『』「」","‘’“”"]}),maskHas=(config.rPunctuation={at:["-︐︑︒︓︔︕︖‛｀‐━―─ーˉ﹣﹦~〜∽∼⁓﹗!﹫＠﹟＃﹩＄﹪％﹠＆﹡ꁘ(﹙﹚)﹐,｡.．∶﹕︰:﹔;､丶﹑﹖?⋯┅¨▪•‧・﹒ꔷ︳﹛﹜{}〝〞｢″〃｣‴⌈⌋﹤﹥︿﹀＾﹢／﹨＼｜︱¦‖＂‟′＇","—，、。：；！？``——————－＝～～～～～！！@@##$$%%&&＊＊（（）），，。。。：：：：；；、、、？？………······〉｛｝｛｝“”“””””「」＜＞∧∨^＋/\\\\||||\"\"''"],rps:[[/([。，·、`°—－～：；（）［］｛｝%∧∨〈〉])\1+/g,function(e){var r=e.slice(0,1);return~"—－～".indexOf(r)?r+r:~"·、`°".indexOf(r)||~"。，".indexOf(r)&&2<e.length?"……":r}],[/…[，；：、。·`～—？！]+/g,"…"],[/[，；。·`～—？！]+(?=…)/g,"…"],[/…+/g,"……"],[/……(?=等[，。！？、])/g,""],[/^(?:…+\n){2,}/gm,"……\n"],[/“：/g,"：“"],[/：“”/g,"：“"],[/。）。/g,"）。"],[/([…。，！？])”[，；：、。·`～—？！]/g,"$1”"],[/([，；：、。·`])[，；：、。·`～—？！]+/g,"$1"],[/([？！])[，；：、。·`～—]+/g,"$1"],[/～[，；：、。·`？！]+/g,"～"],[/[？！]{2,}/g,function(e){var r=e.slice(1);return"？"===e.slice(0,1)?~r.indexOf("！")?"？！":"？？？":~r.indexOf("？")?"！？":"！！！"}]]},config.rQuotes=[[/[`＇‹›‘’『』]/g,"'"],[/'([^\'\n]+)'/g,"‘$1’"],[/'/g,"‘"],[/^([ 　]*)’/gm,"$1‘"],[/：'/g,"：‘"],[/‘(?=。|……|[！？—～]{1,3})?$/gm,"’"],[/[«»‟„〝〞〟［］＂″｢｣“”「」⌈⌋]/g,'"'],[/"([^\"\n]+)"/g,"“$1”"],[/"/g,"“"],[/^([ 　]*)”/gm,"$1“"],[/：”/g,"：“"],[/“(?=。|……|[！？—～]{1,3})?$/gm,"”"]],config.rSeparator=[[/[ 　]+(?=[#§·●◎◇◆□■△▲※〓＝﹡＋＠☆★—－─=~～＊×\*\-\+@])/g,""],[/^＊＊{34,}$/gm,"〔★※★〕"],[/^[#§·●◎◇◆□■△▲※〓＝﹡＋☆★—－─=~～＊×\*\-\+]{2,}$/gm,"@@@@"],[/[#§·●◎◇◆□■△▲※〓＝﹡＋＠]{3,}/g,"@@@@"],[/[`&★☆—－─=~～＊×\-\+]{4,}/g,"@@@@"],[/([。！？…—”」’』])[*＊×xX]{4,}/g,"$1\n@@@@\n"],[/^[＊×\*]{3,}/gm,"@@@@"],[/\*\*{3,}$/g,"@@@@"],[/[\-—＠@][\-—＠分切割线]+[\-—＠@]/g,"@@@@"],[/([a-zA-Z])[\-—]@@@+/g,"$1-XXXXX"],[/@@@+……$/g,"@@@@"],[/([：，；])\n?@@@@\n?/g,"$1****"],[/(\d)\n?@@@@\n?(\d)/g,"$1****$2"],[/@@@@\n?(?=[，。！？…’”』」])/g,"****"],[/@@+\n+@@+/g,"@@@@"],[/@@@+/g,"\n@@@@\n"],[/\n+@@@@\n+/g,"\n@@@@\n"],[/@@@@/g,config.Separator],[/〔★※★〕/g,config.tSeparator]],strCommon._ac="0-9a-zA-Z{$hwPun}{$qhwPun}{$fwPun}{$latin}".comFmt(),strCommon._ei="\\b[a-zA-Z']+(?:[ ][a-zA-Z']+\\b){1,4}",config.rEnglish={Upper:"V+IP|WQLMLGB|NASDAQ|[SPNMCE]ICU|E[MD]BA|PTS[DT]|AIDS|APEC|CCTV|CDMA|CUBA|EAPM|ESPN|HDMI|HTML|IMAX|IMDB|IPTV|NASA|OLED|SARS|SEGA|SOHO|SWAT|WCBA|YYDS|OOXX|XXOO|A[TP]M|B2[BCMA]|C[AI]A|C[BC]D|C[CEFTOI]O|C2[ABC]|CN[NM]|FDA|PV[CPE]|I[BC]M|IS[OP]|L[ES]D|MM[PB]|WT[FO]|[ABC]BS|[ABN]BC|[ICR]CU|[CG]PU|[SH]UV|[VD]CD|[DR]NA|[NC]BA|[MK]TV|[SG]PA|UV[ABCD]|AED|AMC|BGM|CSS|DIY|EDA|EMS|FBI|GDP|GPS|GSM|IMF|IPO|KGB|LOL|LSP|MBA|MPV|MRI|NDE|NHK|NND|NPC|NTR|O2O|OEM|OMG|ORV|PDA|PPT|RPG|QRS|SOS|TMD|TNT|TVB|UFO|USA|VCR|VPN|WPS|YQF|C[TDR]|D[PCJ]|O[SAL]|P[CS]|I[DPC]|[SJ]B|[STP]M|[VAMCX]R|[ADTM]V|[UV]I|[OJUP]K|[EIQY]Q|NG|VS|I",Special:"iPhone|iPhoneSE|iPhoneX|iPhoneXR|iPhoneXRMax|iPhoneXR|iPad|iPadPro|iPadAir|iMac|iTv|iPod|iOS|ThinkPad|Windows|Linux|Unix|FreeBSD|JavaScript|JScript|VBScript|TikTok|toC|toB|PlayStation|ing",SpecialName:"McCai|McCall|McClure|McCormick|McCoy|McCullough|McDaniel|McDonald|McDowell|McGee|McGuire|McIntyre|McKayla|McKee|McKenna|McKenzie|McKile|McKinley|McKinney|McLovin|MacDonald",SpecialComb:"ZhuangBility|NiuBility|ShaBility|GameOver",Unit:"MHz|GHz|KHz|kWh|kW|mWh|gWh|mA|μA|mV|μV|mΩ|μΩ|Mbps|mmHg|MT/s",UnitSpecial:/kW|mA|mV/i,Overlap:/\b(buling|duang|bling|fuck|goal|what|why|who|biu|bye|yes|hia|mua|dei|gei|ha|up|go|no|hi|ok)\1+\b/gi,FixFirst:[{hit:[/\b[a-zA-Z]{2,}(?:·\b[a-zA-Z]{2,}\b){1,4}/g,/\b[a-zA-Z]{2,}(?:[－—\-]\b[a-zA-Z]{2,}\b){3,}/g],rp:[/[·－—\-]/g," "]},{hit:/\b[a-zA-Z]+\d+\b[年月日号楼]/g,rp:[/\d+/m," $&"]},{mf:"[a-zA-Z{$latin}\\-']+(?:[ ，][a-zA-Z{$latin}\\-']+)*".comReg("g")},{hit:/\b[\w\-\\\/]{2,}\b/g,need:/\d/,lc:"u"},{hit:"\\b[a-zA-Z{$latin}]+[{$enSep}](?: |\\b[a-zA-Z{$latin}]+\\b)?".comReg("g"),rp:["[{$enSep}]+".comReg(""),"'"],mu:/\b[odlODL]\'[a-z]/g,ml:/ [A-Z][a-z]+'[a-z]+ /g}],FixLast:[{hit:"\\W{$_ei}\\W".comReg("g"),need:"[{$han}]".comReg(""),lc:"s",ml:/\'[A-Z]{1,2} /g},{hit:["《[ {$_ac}]{2,}》".comReg(),"（[ {$_ac}]{2,}）".comReg(),"【[ {$_ac}]{2,}】".comReg()],need:/[ ，]/,lc:"z"},{ms1:"^{$_ei}[{$han}]".comReg("gm"),ms2:"{$_ei}[（【]".comReg("g"),ms3:/——\b[a-zA-Z]+(?: [a-zA-Z]+){1,2}\b/g,mu1:/\b(?:([a-z])\1+|abc?d?e?f?g?|c?defg?|xyz|jqka?|wsad|wasd|qwerty|(What|Why|Fuck|Goal|Go)(?:[，。！？]\1){1,4})\b/gi,mu2:/\b[a-zA-Z]{1,4}[国省市县山城江河]/g,mu3:/\b[a-zA-Z](?:[\+\-\.][a-zA-Z])+\b/g,ml1:/\/\b[a-zA-Z]{2,}\b/g,ml2:/ \b(?:A|About|An|And|As|At|Be|But|By|For|From|In|Into|Is|Nor|Of|Off|On|Onto|Or|Out|Over|Should|So|The|To|Under|Will|With|Yet)\b /g,ml3:"（[a-zA-Z{$tone}]+）(?:\\W（[a-zA-Z{$tone}]+）)+".comReg("g"),ml4:/【[a-zA-Z]+➡[^➡\n]+】/g,ml5:/\b(?:\d+X\d+|[EH]m+|[OA]h+|[WH]a+|Nim|Ssi|Xi)\b/g,md1:"[{$latin}]\\b[a-zA-Z]+\\b".comReg("g")},{hit:/\b(?:Mrs?|Ms|Doc|Dr|Jr|Rev|Hon|Mmes?|Esq|Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sept|Oct|Nov|Dec)\b。(?!$)/gi,lc:"f",rp:[/。/,"."]},{hit:[/\b(?:\d[\d\.。]{0,18} ?)(?:(?:portion|second|minute|barrel|sheet|group|batch|bunch|pint|pair|kcal|roll|unit|grad|head|bolt|pile|hour|turn|se[tc]|min|rad|cal|bar|gal|deg|lot|mmg|bag|vin|pkg|vax|vw|cg|bu|ex|re|ml|in|[mμnk]s|[ok]z|f[rt]|[gy]d|p[txc]|[krcmnμ]m|[cszevhm])\b|(?:doz|gr|kg|lb|in|g|l)。?|(?:[ml][。\.]t|sh[。\.]t|g[。\.]gr)[。\.]|(?:sq|cu)[。\.](?:ft|m)|sq[。\.](?:in|yd)\b)/gi,/。\b(?:Txt|Jpe?g|Bmp|Png|Net|Gif|Ppt|Webp|Avi|Mkv|MP[345])\b/g,/\b(?:[\w-—]+@\b[\w-—]+\b(?:[。\.]\b[\w-—]+\b)+|(?:(?:https?|ftp|file)[:：]\/{2})?\b(?:[-\w]+[。\.])+(?:com|net|org|gov|top|xyz|cn|ru|me|io))\b/gi],at:["：。—",":.-"],lc:"l"},{rps:[[/‘([^‘’']{2,})'/g,"‘$1’"],[/'([^‘’']{2,})’/g,"‘$1’"],[/'([a-z]{1,2})’/g,"'$1'"],[/‘([a-zA-Z]{1,2})'/g,"‘$1’"]]}]},strCommon._f1="[0-9。\\.]+[0-9a-zA-Z]*[{$ofwPun}]?".comFmt(),config.rCharacter=[{hit:"\\b[a-zA-Z]*{$_f1}(?:[。·.：〉〈＊，—＋－＝＞＜～><]{1,2}\\b{$_f1})+".comReg(),at:["。·.：〉〈＊—＋－＝＞＜～","...:><×-+-=><~"]},{hit:/\b[0-9a-zA-Z]+(?:[~～－—\-]{1,4}[0-9a-zA-Z]+){1,2}\b/g,rps:[[/[－—\-]+/g,"-"],[/[~～]+/g,"~"]]},{hit:[/\b\d+(?:\.\d+)?\b(\W{0,3})[~～－–—\-]{1,4}\b\d+(?:\.\d+)?\b\1/g,/\+—/g],at:["－–—~","---～"],rps:[[/\-+/,"-"],[/～～+/,"～"]]},{hit:[/\b(?:\d{1,3}(?:[,，]\d{1,3}){1,3}[。\.]\d{1,8}|\d{1,3}(?:[,，]\d{1,3}){1,3}|\d{1,18}[。\.]\d{1,8})\b/g,/\b(?:(?:[1-9]|[1-9]\d|1\d{2}|25[0-5]|2[0-4]\d)(?:[。\.](?:\d|[1-9]\d|1\d{2}|25[0-5]|2[0-4]\d)){3})\b/g,/\b(?:[A-Z][\.．。]){2,4}/g,/^\d{1,2}。/gm],skip:/\b(?:\d+，\d{1,2}|\d+(?:，\d+){2,}|[1-9]\d+。\d{3})\b/,at:["，。．",",.."]},{hit:/\b(?:[A-Z]\.){2,4}(?=[’”』」]|\n)/g,rp:[/\.$/,"。"]},{hit:/\b(?:No|Top|Lv|Level)\b。\b\d{1,5}\b/g,lc:"u",rp:[/。/,"."]},{hit:/[,.]\n/g,at:[",.","，。"]}],config.rEnd=[[/—{1,2}>/g," --\x3e "],[/={1,2}>/g," => "],[/Co。，? ?Ltd。?/gi,"Co.,Ltd."]],config.rHtmlEntity={hit:/[&＆][a-zA-Z1-8]{2,18}[;；]/g,data:{dollar:36,cent:162,pound:163,curren:164,yen:165,copy:169,reg:174,trade:8482,commat:64,Copf:8450,incare:8453,gscr:8458,hamilt:8459,Hfr:8460,Hopf:8461,planckh:8462,planck:8463,Iscr:8464,image:8465,Lscr:8466,ell:8467,Nopf:8469,numero:8470,copysr:8471,weierp:8472,Popf:8473,Qopf:8474,Rscr:8475,real:8476,Ropf:8477,rx:8478,Zopf:8484,mho:8487,Zfr:8488,iiota:8489,bernou:8492,Cfr:8493,escr:8495,Escr:8496,Fscr:8497,Mscr:8499,oscr:8500,alefsym:8501,beth:8502,gimel:8503,daleth:8504,DD:8517,dd:8518,ee:8519,ii:8520,starf:9733,star:9734,phone:9742,female:9792,male:9794,spades:9824,clubs:9827,hearts:9829,diams:9830,loz:9674,sung:9834,flat:9837,natural:9838,sharp:9839,check:10003,cross:10007,malt:10016,sext:10038,VerticalSeparator:10072,lbbrk:10098,rbbrk:10099,excl:33,num:35,percnt:37,amp:38,lpar:40,rpar:41,ast:42,comma:44,period:46,sol:47,colon:58,semi:59,quest:63,lbrack:91,bsol:92,rbrack:93,Hat:94,lowbar:95,grave:96,lbrace:123,vert:124,rbrace:125,tilde:126,circ:710,nbsp:160,ensp:8194,emsp:8195,thinsp:8201,zwnj:8204,zwj:8205,lrm:8206,rlm:8207,iexcl:161,brvbar:166,sect:167,uml:168,ordf:170,not:172,shy:173,macr:175,sup2:178,sup3:179,acute:180,micro:181,para:182,middot:183,cedil:184,sup1:185,ordm:186,iquest:191,hyphen:8208,ndash:8211,mdash:8212,horbar:8213,Vert:8214,dagger:8224,Dagger:8225,bull:8226,nldr:8229,hellip:8230,permil:137,pertenk:8241,prime:8242,Prime:8243,tprime:8244,bprime:8245,oline:8254,caret:8257,hybull:8259,frasl:8260,bsemi:8271,qprime:8279,quot:34,apos:39,laquo:171,raquo:187,lsquo:8216,rsquo:8217,sbquo:8218,ldquo:8220,rdquo:8221,bdquo:8222,lsaquo:8249,rsaquo:8250,frac14:188,frac12:189,frac34:190,frac13:8531,frac23:8532,frac15:8533,frac25:8534,frac35:8535,frac45:8536,frac16:8537,frac56:8538,frac18:8539,frac38:8540,frac58:8541,frac78:8542,plus:43,minus:8722,times:215,divide:247,equals:61,ne:8800,plusmn:177,lt:60,gt:62,deg:176,fnof:402,forall:8704,comp:8705,part:8706,exist:8707,nexist:8708,empty:8709,nabla:8711,isin:8712,notin:8713,ni:8715,notni:8716,prod:8719,coprod:8720,sum:8721,mnplus:8723,plusdo:8724,setminus:8726,lowast:8727,compfn:8728,radic:8730,prop:8733,infin:8734,angrt:8735,ang:8736,angmsd:8737,angsph:8738,mid:8739,nmid:8740,parallel:8741,npar:8742,and:8743,or:8744,cap:8745,cup:8746,int:8747,Int:8748,iiint:8749,conint:8750,Conint:8751,Cconint:8752,cwint:8753,cwconint:8754,awconint:8755,there4:8756,because:8757,ratio:8758,Colon:8759,minusd:8760,mDDot:8762,homtht:8763,sim:8764,bsim:8765,ac:8766,acd:8767,wreath:8768,nsim:8769,esim:8770,sime:8771,nsime:8772,cong:8773,simne:8774,ncong:8775,asymp:8776,nap:8777,approxeq:8778,apid:8779,bcong:8780,asympeq:8781,bump:8782,bumpe:8783,esdot:8784,eDot:8785,efDot:8786,erDot:8787,colone:8788,ecolon:8789,ecir:8790,cire:8791,wedgeq:8793,veeeq:8794,trie:8796,equest:8799,equiv:8801,nequiv:8802,le:8804,ge:8805,lE:8806,gE:8807,lnE:8808,gnE:8809,Lt:8810,Gt:8811,between:8812,NotCupCap:8813,nlt:8814,ngt:8815,nle:8816,nge:8817,lsim:8818,gsim:8819,nlsim:8820,ngsim:8821,lg:8822,gl:8823,ntlg:8824,ntgl:8825,pr:8826,sc:8827,prcue:8828,sccue:8829,prsim:8830,scsim:8831,npr:8832,nsc:8833,sub:8834,sup:8835,nsub:8836,nsup:8837,sube:8838,supe:8839,nsube:8840,nsupe:8841,subne:8842,supne:8843,cupdot:8845,uplus:8846,sqsub:8847,sqsup:8848,sqsube:8849,sqsupe:8850,sqcap:8851,sqcup:8852,oplus:8853,ominus:8854,otimes:8855,osol:8856,odot:8857,ocir:8858,oast:8859,odash:8861,plusb:8862,minusb:8863,timesb:8864,sdotb:8865,vdash:8866,dashv:8867,top:8868,perp:8869,models:8871,vDash:8872,Vdash:8873,Vvdash:8874,VDash:8875,nvdash:8876,nvDash:8877,nVdash:8878,nVDash:8879,prurel:8880,vltri:8882,vrtri:8883,ltrie:8884,rtrie:8885,origof:8886,imof:8887,mumap:8888,hercon:8889,intcal:8890,veebar:8891,barvee:8893,angrtvb:8894,lrtri:8895,xwedge:8896,xvee:8897,xcap:8898,xcup:8899,diamond:8900,sdot:8901,Star:8902,divonx:8903,bowtie:8904,ltimes:8905,rtimes:8906,lthree:8907,rthree:8908,bsime:8909,cuvee:8910,cuwed:8911,Sub:8912,Sup:8913,Cap:8914,Cup:8915,fork:8916,epar:8917,ltdot:8918,gtdot:8919,Ll:8920,Gg:8921,leg:8922,gel:8923,cuepr:8926,cuesc:8927,nprcue:8928,nsccue:8929,nsqsube:8930,nsqsupe:8931,lnsim:8934,gnsim:8935,prnsim:8936,scnsim:8937,nltri:8938,nrtri:8939,nltrie:8940,nrtrie:8941,vellip:8942,ctdot:8943,utdot:8944,dtdot:8945,disin:8946,isinsv:8947,isins:8948,isindot:8949,notinvc:8950,notinvb:8951,isinE:8953,nisd:8954,xnis:8955,nis:8956,notnivc:8957,notnivb:8958,lceil:8968,rceil:8969,lfloor:8970,rfloor:8971,lang:9001,rang:9002,Alpha:913,Beta:914,Gamma:915,Delta:916,Epsilon:917,Zeta:918,Eta:919,Theta:920,Iota:921,Kappa:922,Lambda:923,Mu:924,Nu:925,Xi:926,Omicron:927,Pi:928,Rho:929,Sigma:931,Tau:932,Upsilon:933,Phi:934,Chi:935,Psi:936,Omega:937,alpha:945,beta:946,gamma:947,delta:948,epsilon:949,zeta:950,eta:951,theta:952,iota:953,kappa:954,lambda:955,mu:956,nu:957,xi:958,omicron:959,pi:960,rho:961,sigmaf:962,sigma:963,tau:964,upsilon:965,phi:966,chi:967,psi:968,omega:969,thetasym:977,upsih:978,piv:982,Agrave:192,Aacute:193,Acirc:194,Atilde:195,Auml:196,Aring:197,AElig:198,Ccedil:199,Egrave:200,Eacute:201,Ecirc:202,Euml:203,Lgrave:204,Lacute:313,Lcirc:206,Luml:207,ETH:208,Ntilde:209,Ograve:210,Oacute:211,Ocirc:212,Otilde:213,Ouml:214,Oslash:216,Ugrave:217,Uacute:218,Ucirc:219,Uuml:220,Yacute:221,THORN:222,szlig:223,agrave:224,aacute:225,acirc:226,atilde:227,auml:228,aring:229,aelig:230,ccedil:231,egrave:232,eacute:233,ecirc:234,euml:235,igrave:236,iacute:237,icirc:238,iuml:239,eth:240,ntilde:241,ograve:242,oacute:243,ocirc:244,otilde:245,ouml:246,oslash:248,ugrave:249,uacute:250,ucirc:251,uuml:252,yacute:253,thorn:254,yuml:255,Amacr:256,amacr:257,Abreve:258,abreve:259,Aogon:260,aogon:261,Cacute:262,cacute:263,Ccirc:264,ccirc:265,Cdot:266,cdot:267,Ccaron:268,ccaron:269,Dcaron:270,dcaron:271,Dstrok:272,dstrok:273,Emacr:274,emacr:275,Edot:278,edot:279,Eogon:280,eogon:281,Ecaron:282,ecaron:283,Gcirc:284,gcirc:285,Gbreve:286,gbreve:287,Gdot:288,gdot:289,Gcedil:290,Hcirc:292,hcirc:293,Hstrok:294,hstrok:295,Itilde:296,itilde:297,Imacr:298,imacr:299,Iogon:302,iogon:303,Idot:304,imath:305,IJlig:306,ijlig:307,Jcirc:308,jcirc:309,Kcedil:310,kcedil:311,kgreen:312,lacute:314,Lcedil:315,lcedil:316,Lcaron:317,lcaron:318,Lmidot:319,lmidot:320,Lstrok:321,lstrok:322,Nacute:323,nacute:324,Ncedil:325,ncedil:326,Ncaron:327,ncaron:328,napos:329,ENG:330,eng:331,Omacr:332,omacr:333,Odblac:336,odblac:337,OElig:338,oelig:339,Racute:340,racute:341,Rcedil:342,rcedil:343,Rcaron:344,rcaron:345,Sacute:346,sacute:347,Scirc:348,scirc:349,Scedil:350,scedil:351,Scaron:352,scaron:353,Tcedil:354,tcedil:355,Tcaron:356,tcaron:357,Tstrok:358,tstrok:359,Utilde:360,utilde:361,Umacr:362,umacr:363,Ubreve:364,ubreve:365,Uring:366,uring:367,Udblac:368,udblac:369,Uogon:370,uogon:371,Wcirc:372,wcirc:373,Ycirc:374,ycirc:375,Yuml:376,Zacute:377,zacute:378,Zdot:379,zdot:380,Zcaron:381,zcaron:382,DownBreve:785,olarr:8634,orarr:8635,lharu:8636,lhard:8637,uharr:8638,uharl:8639,rharu:8640,rhard:8641,dharr:8642,dharl:8643,rlarr:8644,udarr:8645,lrarr:8646,llarr:8647,uuarr:8648,rrarr:8649,ddarr:8650,lrhar:8651,rlhar:8652,nlArr:8653,nhArr:8654,nrArr:8655,lArr:8656,uArr:8657,rArr:8658,dArr:8659,hArr:8660,vArr:8661,nwArr:8662,neArr:8663,seArr:8664,swArr:8665,lAarr:8666,rAarr:8667,ziglarr:8668,zigrarr:8669,larrb:8676,rarrb:8677,duarr:8693,hoarr:8703,loarr:8701,roarr:8702,xlarr:10229,xrarr:10230,xharr:10231,xlArr:10232,xrArr:10233,xhArr:10234,dzigrarr:10239,xmap:10236,nvlArr:10498,nvrArr:10499,nvHarr:10500,Map:10501,lbarr:10508,rbarr:10509,lBarr:10510,rBarr:10511,RBarr:10512,DDotrahd:10513,UpArrowBar:10514,DownArrowBar:10515,Rarrtl:10518,latail:10521,ratail:10522,lAtail:10523,rAtail:10524,larrfs:10525,rarrfs:10526,larrbfs:10527,rarrbfs:10528,nwarhk:10531,nearhk:10532,searhk:10533,swarhk:10534,nwnear:10535,nesear:10536,seswar:10537,swnwar:10538,cudarrr:10549,ldca:10550,rdca:10551,cudarrl:10552,larrpl:10553,curarrm:10556,cularrp:10557,rarrpl:10565,harrcir:10568,Uarrocir:10569,lurdshar:10570,ldrushar:10571,RightUpDownVector:10575,DownLeftRightVector:10576,LeftUpDownVector:10577,LeftVectorBar:10578,RightVectorBar:10579,RightUpVectorBar:10580,RightDownVectorBar:10581,DownLeftVectorBar:10582,DownRightVectorBar:10583,LeftUpVectorBar:10584,LeftDownVectorBar:10585,LeftTeeVector:10586,RightTeeVector:10587,RightUpTeeVector:10588,RightDownTeeVector:10589,DownLeftTeeVector:10590,DownRightTeeVector:10591,LeftUpTeeVector:10592,LeftDownTeeVector:10593,lHar:10594,uHar:10595,rHar:10596,dHar:10597,luruhar:10598,ldrdhar:10599,ruluhar:10600,rdldhar:10601,lharul:10602,llhard:10603,rharul:10604,lrhard:10605,udhar:10606,duhar:10607,RoundImplies:10608,erarr:10609,simrarr:10610,larrsim:10611,rarrsim:10612,rarrap:10613,ltlarr:10614,gtrarr:10616,subrarr:10617,suplarr:10619,lfisht:10620,rfisht:10621,ufisht:10622,dfisht:10623}},config.nSeparator="^(?:{$0}|{$1})$".fmt([config.Separator.space(),config.Separator.cleanSpace()]),config.chapRegs={b:"^[{$b.0}].+[{$b.1}]$".chapReg(""),sep:"^[{$sep}]+".chapReg(""),t1:"^(?:[{$nc}]|[0-9]{1,2})$".chapReg(""),t5:"{$w3}+$".chapReg(""),s1:"([^0-9\\.])[ ·—-]([{$nc}]|[{$n}]{1,2})$".chapReg(""),s2:"[ ·]([{$nc}]|[0-9]{1,2})$".chapReg(""),s3:" (?=[{$han}]+)".comReg("g"),p1:"[，。]|{$w2}[{$b.1}]$".chapReg(""),p2:"[{$b}]".chapReg("g"),e1:"^({$t91}[{$c.2}]{$sn})(?:{$e}|$)$\\n+\\1.*$".chapReg("gm"),e2:"^{$t3}(?:{$e}|$)$\\n+\\1.*$".chapReg("gm")},function(r){return function(e){return!!r[e]||!(r[e]=!0)}}({}));!function(n,a,c){String.prototype.masked=function(e,r,t){return r&&maskHas(r)?this:this.replace(e,function(e){return(e="function"==typeof t?t(e):e)in a||(a[e]="〔☯"+ ++c+"〕",n.push([a[e],e])),a[e]})},String.prototype.maskSep=function(e,r){return this.masked(e,r,function(e){return e.replaceAt(["。“”『』‘’「」",".\"\"\"\"''''"])})},String.prototype.maskQuote=function(e,r){return this.masked(e,r,function(e){return e.replace(/[“”「」"]/g,"〔☯双引〕").replace(/[‘’『』']/g,"〔☯单引〕")})},String.prototype.maskLetter=function(e,r){return this.masked(e,r)},String.prototype.maskRestore=function(){var r=this;return-1<c&&(n.map(function(e){r=r.replace(e[0].getReg("g"),e[1])}),r=r.replace(/〔☯双引〕/g,'"').replace(/〔☯单引〕/g,"'")),r}}([],{},-1),Object.assign(String.prototype,{converts:function(e){return e.reduce(function(e,r){return e.convert(r)},this)},convert:function(e){return"function"==typeof this[e="convert"+e]?this[e].apply(this,[].slice.call(arguments,1)):this},replaceHooks:function(e){return e.reduce(function(e,t){return"hit"in t?[].concat(t.hit).reduce(function(e,r){return e.replace(r,function(e){return~e.search(/^\d+$/)||"skip"in t&&~e.search(t.skip)||"need"in t&&!~e.search(t.need)?e:e.replaceHook(t)})},e):e.replaceHook(t)},this)},replaceHook:function(e){var r,t=this;for(r in e)~"hit|skip|need".indexOf(r)||("at"===r?t=t.replaceAt(e.at):"rp"===r?t=t.replace(e.rp[0],e.rp[1]):"rps"===r?t=t.replaces(e.rps):"lc"===r?t=t.toLetterCase(e.lc):"m"===r.charAt(0)&&(t=t.matchLetterCase(e[r],r.slice(1,2))));return t},matchLetterCase:function(e,r){return this.replace(e,function(e){return e.toLetterCase(r)})},toLetterCase:function(e){function r(e){return e.toUpperCase()}switch(e){case"c":return this.replace(/\s+/g,"");case"u":return this.toUpperCase();case"l":return this.toLowerCase();case"d":return this.replace(/\b[a-zA-Z]+\b/g,function(e){return e.toLowerCase()});case"f":return this.charAt(0).toUpperCase()+this.slice(1).toLowerCase();case"s":return this.replace(/\b[a-z]/g,r);case"z":return this.toLowerCase().replace(/\b[a-z]/g,r)}return this},safetyBefore:function(){return this.replaceAt(config.aQuotes).maskSep(config.enSep).maskSep(config.rCoord).maskQuote(/[“"]([0-9a-zA-Z]+)[”"]/g).maskQuote(/[‘']([0-9a-zA-Z]+)[’']/g).maskLetter(/\b[a-zA-Z][a-z]+[A-Z][a-zA-Z]*\b/g,"maskLetterType")},safetyAfter:function(){return this.maskRestore().replace(/[“"]([^”"，。\n]*[0-9a-zA-Z])[”"]/g,"“$1”").replace(/[‘']([^’'，。、（）“”"\n]*[0-9a-zA-Z])[’']/g,"‘$1’").replace(/\b[A-Za-z]+\b[\'‘’]\b[A-Za-z]{1,2}\b /g,function(e){return e.toLetterCase("f").replace(/[\'‘’]/,"'")}).matchLetterCase(/ [A-Z][a-z]+'[a-z]+ /g,"l")},convertInit:function(){return(this+"\n").trims().replace(/\n\n+/g,"\n")},convertEnd:function(){return this.convertCharacter().replaces(config.rEnd).convertFinish()},convertFinish:function(){return this.safetyAfter().replace(/  +/g," ").replace(/\n\n\n+/g,"\n\n").replace(/^\n+/,"").replace(/\n\n+$/,"\n")},convertCharacter:function(){return this.replaceHooks(config.rCharacter)},convertSpace:function(){return maskHas("Space")?this:this.cleanSpace(" +{$spaceWord}|{$spaceWord} +".comReg("g"),/ +/g)},convertSeparator:function(){return this.replaces(config.rSeparator)},convertQuote:function(){return this.safetyBefore().replaces(config.rQuotes).safetyAfter()},convertESQuote:function(){return this.replaceAt(config.aQuotes)},convertCNQuote:function(){return this.replaceAtRev(config.aQuotes)},convertNumber:function(){return maskHas("Number")||maskHas("NumberLetter")?this:this.replaceAt(config.sNumber)},convertLetter:function(){return maskHas("Letter")||maskHas("NumberLetter")?this:this.replaceAt(config.sLetter)},convertNumberLetter:function(){return maskHas("NumberLetter")?this:this.replaceAt(config.sNumberLetter)},convertHtmlEntity:function(){var r,t=config.rHtmlEntity;return this.replace(t.hit,function(e){return r=e.replace(/[&＆;；]/g,""),0<(r=t.data[r]||t.data[r.toLowerCase()]||0)?String.fromCharCode(r):e})},convertVariant:function(){return this.replaceAt(config.sVariants)},convertSerialNumber:function(){return this.replaceAtArr(config.sSerialNumber,"|",function(e){return"（"+e+"）"})},convertPunctuation:function(){return this.replaceHook(config.rPunctuation)},convertUnicode:function(){return this.convertNumberLetter().replace(/＆#/g,"&#").replace(/\b[\da-fA-F]+\b；/g,function(e){return e.slice(0,-1)+";"}).replace(/％\b[\da-fA-F]+\b/g,function(e){return"%"+e.slice(1)}).replace(/&#\b[xX][\da-fA-F]{4}\b;?/g,function(e){return unescape("%u"+e.slice(3,-1))}).replace(/\\\b[uU]?[\da-fA-F]{4}\b;?/g,function(e){return unescape("%u"+e.replace(/[\\uU;]/g,""))}).replace(/\\\b[xX][\da-fA-F]{2}\b/g,function(e){return unescape("%u00"+e.slice(2))}).replace(/&#\b\d+\b;/g,function(e){return String.fromCharCode(e.slice(2,-1))}).replace(/(?:%\b[\da-fA-F]{2}\b%\b[\da-fA-F]{2}\b)+/g,function(r){try{return decodeURIComponent(r)}catch(e){return r}})},convertEnglish:function(){var n,a,e=""+this;return e.length<2||e.search(/[a-zA-Z]/)<0?e:((n=config.rEnglish).SpecialCombRegx=n.SpecialComb.split("|").map(function(e){return e.split(/(?=[A-Z])/).join(" ?")}).join("|"),a=["Special","SpecialName","SpecialComb","Unit"].reduce(function(e,t){return e[t]=function(r){return n[t].split("|").find(function(e){return e.toLowerCase()===(r+"").replace(/ +/g,"").toLowerCase()})},e},{}),e.convertLetter().maskLetter(config.novelAuthor).replace(/\b(?:[A-Z][a-z]+){3,}\b/g,function(e){return e.replace(/[A-Z]/g," $&").trim()}).maskLetter(/\b[a-zA-Z][a-z]+[A-Z][a-zA-Z]*\b/g,"maskLetterType").replaceHooks(n.FixFirst).matchLetterCase(("\\b(?:"+n.Upper+")\\b").getReg("gi"),"u").replace(("\\b("+n.Special+")( ?[0-9]{1,4}[a-z]{0,6})?\\b").getReg("gi"),function(e,r,t){return a.Special(r)+(t&&t.toUpperCase()||"")}).replace(("\\b(?:"+n.SpecialName+")\\b").getReg("gi"),a.SpecialName).replace(("\\b(?:"+n.SpecialCombRegx+")\\b").getReg("gi"),a.SpecialComb).replace(("\\b([0-9][0-9。\\.]{0,18} ?)?("+n.Unit+")\\b").getReg("gi"),function(e,r,t){return~t.search(n.UnitSpecial)?r?r+a.Unit(t):e:(r||"")+a.Unit(t)}).replace(n.Overlap,function(e,r){return r.toLetterCase("f").repeat(~~(e.length/r.length))}).replaceHooks(n.FixLast).maskRestore())},convertChapter:function(c,i,o){i=i||"\n\n",o=o||"",c=c||"fix","|nofix|fix|center|left|right|".indexOf("|"+c+"|")<0&&(c="fix");var s="^(?:{$n4})".chapReg(""),u="^{$w2}$".chapReg(),n="{$ss}$".chapReg(""),e=config.regListTitle.map(function(e){return[e,function(e){return e.replace(config.regListTitleCheck,"\n〔☢〕")}]});return(""+this).convertNumberLetter().cleanSpace("{$ts}".chapReg("g")).replaces(e).__ChapterPrep("t0",function(e){return e.stringAlign(i,o,c)}).__ChapterPrep("t1",function(e,r,t){return t&&~t.search(/^[\!\?！？。…]{1,3}$/)||e.__ChapterSkip("t0")||e.__ChapterSkip("t1")?e:(t?t=t.__ChapterHandle(~t.search(/^之/),"t1"):r=r.replace(n,function(e){return"（"+e.replace(/[（\(\)）]/g,"")+"）"}).replace(/（）/,""),(r+t).stringAlign(i,o,c))}).__ChapterPrep("t2",function(e,r,t,n){var a;return n&&~n.search(u)?"【"+r+"·"+n+"】":!(t=(a="第"===r.slice(0,1))&&n&&~r.search(/\d/)?"：":t)&&!a||~n.search(/^[！？。…]{1,3}$/)||!t&&n&&~n.search(/[，。]/g)||e.__ChapterSkip("t0")||e.__ChapterSkip("t2")?e:((r=~r.search(s)?r:"第"+r.replace(/^第+/,"")).__ChapterZero()+n.__ChapterHandle()).stringAlign(i,o,c)}).__ChapterPrep("t3",function(e,r,t){return e.__ChapterSkip("t0")||-1<t.indexOf(r)?e:(r.__ChapterZero()+t.__ChapterHandle("no")).stringAlign(i,o,c)}).convertChapterFix(i,o,"fix"===c).__ChapterError().replace(/〔\u2622〕/g,"")},convertChapterFix:function(a,c,e){var n;return e?(n=strChapter.crt,this.__ChapterPrep("t4",function(e,r,t,n){return a+"第"+t+r+n.__ChapterHandle()+c}).__ChapterPrep("t5",function(e,r,t){return a+"第"+r.__ChapterZero()+n+t.__ChapterHandle(!1,"t5")+c}).__ChapterPrep("t6",function(e,r,t){return t=t.trims(),~e.search(/。/)||~t.search(/^[！？。…—]{1,3}$/)||~t.search(~r.search(/^\d+/)?/[！？。]$/:/[！？。…’”』」]$/)||e.__ChapterSkip("t0")||e.__ChapterSkip("t2")||e.cleanSpace().__ChapterSkip("t6")?e:a+"第"+r.__ChapterZero()+n+t.__ChapterHandle()+c})):this},findCenter:function(e,r,t){return this.replace(e,function(e){return e.stringAlign(r||"",t||"","center")})},stringAlign:function(e,r,t){var n=2*config.Linenum,a=this.trim(),c=a.len();return"left"!==t&&c<n&&("center"===t?a="　".repeat(~~((n-c)/4))+(c%4==0?" ":"")+a:"right"===t&&(a="　".repeat(~~((n-c)/2))+(c%2==0?"":" ")+a)),(e||"")+a+(r||"")},__ChapterHandle:function(e,r){var t=config.chapRegs,n=(""+this).replace(/  +/g," ").replace(t.b,function(e){return e.slice(1,-1)}).replace(t.sep,"");return n.length<1?"":("t1"==r?n=n.replace(t.t1,"（$&）"):"t5"==r&&(n=n.replace(t.t5,"")),(e?"":config.Divide)+n.replace(/^[上中下一二三四五续补再终完]{1,3}$/,"（$&）").replace(t.s1,"$1（$2）").replace(t.s2,"（$1）").replace(/[ ·][IVXC]{1,6}$/i,function(e){return"（"+e.slice(1).toUpperCase()+"）"}).replace(/（(\d)）$/,"（0$1）").replace(t.s3,"，").replace(/【?(注\b\d{1,2}\b)/g,"【$1】"))},__ChapterSkip:function(e){return this.someTest(config.regSkipTitle[e||"t0"])},__ChapterZero:function(){return(""+this).replaceAt(config.sNumber).replace(/\b[1-9]\b/g,"0$&")},__ChapterPrep:function(e,r){var t=this,n=getChapters[e],e=regChapter[e],a="",c=config.chapRegs,n=("join"in n&&(a=n.join,e=e.join(a)),n.tpl.chapFlag("gm",a)),t=t.replace("^[{$b.0}](?:{$0})[{$b.1}]?(?:{$sn}{$e})?$".fmt(e).chapReg(),function(e){return~e.search(c.p1)?e:e.trims().replace(c.p2," ").replace(/^ +/,"")});return n.str=n.str.replace(/０\-９|[０-９]/g,""),t.search(n.str.getReg(n.t))<0?t:t.replace("({$0}\\n{1,2})\\1+".fmtReg(n.str,"g"),"$1").replace(n.str.getReg(n.flag),r)},__ChapterError:function(){function e(e){return(e=e.split(/\n+/,2)).sort(function(e,r){return r.length-e.length}),~e[0].search(/[。！？…～]$/)?e[1]+"\n"+e[0].replace(e[1],""):e[0]}var r="^({$t91}[{$c.2}]{$sn})(?:{$e}|$)$\\n+\\1.*$".chapReg("gm"),t="^{$t3}(?:{$e}|$)$\\n+\\1.*$".chapReg("gm");return this.replace(/^序：之[章卷]/gm,function(e){return e.replace(/：/,"")}).replace(r,e).replace(t,e)}});